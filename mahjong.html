<!DOCTYPE html>
<html lang="zh-Hans-CN">
<head>
  <meta charset="UTF-8">
  <title>æ—¥éº»ç®—ç•ª</title>
</head>
<body>
<br>
<br>
<br>
<br>
<br>
<p>
  <label style="font-family: å¾®è½¯é›…é»‘,serif;font-size: xx-large">è¯·é€‰æ‹©è§„åˆ™*ï¼š</label>
  <label style="font-family: é»‘ä½“,serif;font-size: xx-large">
    <input type="radio" id="four_players" style="font-family: é»‘ä½“, sans-serif; font-size: xx-large"
           name="player_select" onchange="getFourPlayers()">
    å››äººéº»å°†
  </label>
  <label style="font-family: é»‘ä½“,serif;font-size: xx-large">
    <input type="radio" id="three_players" style="font-family: é»‘ä½“, sans-serif; font-size: xx-large"
           name="player_select" onchange="getThreePlayers()">
    ä¸‰äººéº»å°†
  </label>
</p>
<p>
  <label style="font-family: å¾®è½¯é›…é»‘,serif;font-size: xx-large">è¯·ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®åŠ åˆ°æ‰‹ç‰Œ*ï¼š</label>
  <label>
    <label style="font-family: é»‘ä½“,serif;font-size: xx-large">
      <input name="collection_type" type="radio" value="none" onchange="withCollectionType(this.value)">
      æ— 
    </label>
    <label style="font-family: é»‘ä½“,serif;font-size: xx-large">
      <input name="collection_type" type="radio" value="chi" onchange="withCollectionType(this.value)">
      åƒ
    </label>
    <label style="font-family: é»‘ä½“,serif;font-size: xx-large">
      <input name="collection_type" type="radio" value="peng" onchange="withCollectionType(this.value)">
      ç¢°
    </label>
    <label style="font-family: é»‘ä½“,serif;font-size: xx-large">
      <input name="collection_type" type="radio" value="ming_gang" onchange="withCollectionType(this.value)">
      æ˜æ 
    </label>
    <label style="font-family: é»‘ä½“,serif;font-size: xx-large">
      <input name="collection_type" type="radio" value="an_gang" onchange="withCollectionType(this.value)">
      æš—æ 
    </label>
    <br>
    <br>
    <button style="font-family: é»‘ä½“,serif;font-size: xx-large" onclick="onTileButtonClick(this.innerText)">ğŸ€‡</button>
    <button style="font-family: é»‘ä½“,serif;font-size: xx-large" onclick="onTileButtonClick(this.innerText)">ğŸ€ˆ</button>
    <button style="font-family: é»‘ä½“,serif;font-size: xx-large" onclick="onTileButtonClick(this.innerText)">ğŸ€‰</button>
    <button style="font-family: é»‘ä½“,serif;font-size: xx-large" onclick="onTileButtonClick(this.innerText)">ğŸ€Š</button>
    <button style="font-family: é»‘ä½“,serif;font-size: xx-large" onclick="onTileButtonClick(this.innerText)">ğŸ€‹</button>
    <button style="font-family: é»‘ä½“,serif;font-size: xx-large" onclick="onTileButtonClick(this.innerText)">ğŸ€Œ</button>
    <button style="font-family: é»‘ä½“,serif;font-size: xx-large" onclick="onTileButtonClick(this.innerText)">ğŸ€</button>
    <button style="font-family: é»‘ä½“,serif;font-size: xx-large" onclick="onTileButtonClick(this.innerText)">ğŸ€</button>
    <button style="font-family: é»‘ä½“,serif;font-size: xx-large" onclick="onTileButtonClick(this.innerText)">ğŸ€</button>
    <br>
    <button style="font-family: é»‘ä½“,serif;font-size: xx-large" onclick="onTileButtonClick(this.innerText)">ğŸ€</button>
    <button style="font-family: é»‘ä½“,serif;font-size: xx-large" onclick="onTileButtonClick(this.innerText)">ğŸ€‘</button>
    <button style="font-family: é»‘ä½“,serif;font-size: xx-large" onclick="onTileButtonClick(this.innerText)">ğŸ€’</button>
    <button style="font-family: é»‘ä½“,serif;font-size: xx-large" onclick="onTileButtonClick(this.innerText)">ğŸ€“</button>
    <button style="font-family: é»‘ä½“,serif;font-size: xx-large" onclick="onTileButtonClick(this.innerText)">ğŸ€”</button>
    <button style="font-family: é»‘ä½“,serif;font-size: xx-large" onclick="onTileButtonClick(this.innerText)">ğŸ€•</button>
    <button style="font-family: é»‘ä½“,serif;font-size: xx-large" onclick="onTileButtonClick(this.innerText)">ğŸ€–</button>
    <button style="font-family: é»‘ä½“,serif;font-size: xx-large" onclick="onTileButtonClick(this.innerText)">ğŸ€—</button>
    <button style="font-family: é»‘ä½“,serif;font-size: xx-large" onclick="onTileButtonClick(this.innerText)">ğŸ€˜</button>
    <br>
    <button style="font-family: é»‘ä½“,serif;font-size: xx-large" onclick="onTileButtonClick(this.innerText)">ğŸ€™</button>
    <button style="font-family: é»‘ä½“,serif;font-size: xx-large" onclick="onTileButtonClick(this.innerText)">ğŸ€š</button>
    <button style="font-family: é»‘ä½“,serif;font-size: xx-large" onclick="onTileButtonClick(this.innerText)">ğŸ€›</button>
    <button style="font-family: é»‘ä½“,serif;font-size: xx-large" onclick="onTileButtonClick(this.innerText)">ğŸ€œ</button>
    <button style="font-family: é»‘ä½“,serif;font-size: xx-large" onclick="onTileButtonClick(this.innerText)">ğŸ€</button>
    <button style="font-family: é»‘ä½“,serif;font-size: xx-large" onclick="onTileButtonClick(this.innerText)">ğŸ€</button>
    <button style="font-family: é»‘ä½“,serif;font-size: xx-large" onclick="onTileButtonClick(this.innerText)">ğŸ€Ÿ</button>
    <button style="font-family: é»‘ä½“,serif;font-size: xx-large" onclick="onTileButtonClick(this.innerText)">ğŸ€ </button>
    <button style="font-family: é»‘ä½“,serif;font-size: xx-large" onclick="onTileButtonClick(this.innerText)">ğŸ€¡</button>
    <br>
    <button style="font-family: é»‘ä½“,serif;font-size: xx-large" onclick="onTileButtonClick(this.innerText)">ğŸ€€</button>
    <button style="font-family: é»‘ä½“,serif;font-size: xx-large" onclick="onTileButtonClick(this.innerText)">ğŸ€</button>
    <button style="font-family: é»‘ä½“,serif;font-size: xx-large" onclick="onTileButtonClick(this.innerText)">ğŸ€‚</button>
    <button style="font-family: é»‘ä½“,serif;font-size: xx-large" onclick="onTileButtonClick(this.innerText)">ğŸ€ƒ</button>
    <button style="font-family: é»‘ä½“,serif;font-size: xx-large" onclick="onTileButtonClick(this.innerText)">ğŸ€†</button>
    <button style="font-family: é»‘ä½“,serif;font-size: xx-large" onclick="onTileButtonClick(this.innerText)">ğŸ€…</button>
    <button style="font-family: é»‘ä½“,serif;font-size: xx-large" onclick="onTileButtonClick(this.innerText)">ğŸ€„</button>
    <br>
    <br>
    <label style="font-family: é»‘ä½“,serif;font-size: xx-large" for="cards">ç©å®¶æ‰‹ç‰Œï¼š</label>
    <input type="text" id="cards" style="font-family: é»‘ä½“,serif;font-size: xx-large; width: 660px; height: 60px">
    <button style="font-family: é»‘ä½“,serif;font-size: xx-large" onclick="clearCards('cards')">æ¸…é™¤æ‰‹ç‰Œ</button>
    <br>
    <label style="font-family: é»‘ä½“,serif;font-size: xx-large" for="calls">ç©å®¶é¸£ç‰Œï¼š</label>
    <input type="text" id="calls" style="font-family: é»‘ä½“,serif;font-size: xx-large; width: 660px; height: 60px">
    <button style="font-family: é»‘ä½“,serif;font-size: xx-large" onclick="clearCards('calls')">æ¸…é™¤æ‰‹ç‰Œ</button>
  </label>
</p>
<p>
  <label style="font-family: å¾®è½¯é›…é»‘,serif;font-size: xx-large">è¯·è¾“å…¥å®ç‰Œæ•°é‡ï¼š</label>
  <label>
    <input type="text" id="dora_count" style="font-family: é»‘ä½“,serif;font-size: x-large">
  </label>
</p>
<p>
  <label style="font-family: å¾®è½¯é›…é»‘,serif;font-size: xx-large">è¯·é€‰æ‹©é™„åŠ ç•ªç§ï¼š</label>
  <label style="font-family: å¾®è½¯é›…é»‘,serif;font-size: x-large">
    <input type="checkbox" id="reach" style="font-family: é»‘ä½“,serif">ç«‹ç›´
  </label>
  <label style="font-family: å¾®è½¯é›…é»‘,serif;font-size: x-large">
    <input type="checkbox" id="ippatu" style="font-family: é»‘ä½“,serif">ä¸€å‘
  </label>
  <label style="font-family: å¾®è½¯é›…é»‘,serif;font-size: x-large">
    <input type="checkbox" id="clearing" style="font-family: é»‘ä½“,serif">é—¨å‰æ¸…è‡ªæ‘¸å’Œ
  </label>
  <label style="font-family: å¾®è½¯é›…é»‘,serif;font-size: x-large">
    <input type="checkbox" id="blooming" style="font-family: é»‘ä½“,serif">å²­ä¸Šå¼€èŠ±
  </label>
  <label style="font-family: å¾®è½¯é›…é»‘,serif;font-size: x-large">
    <input type="checkbox" id="under_ocean" style="font-family: é»‘ä½“,serif">æµ·åº•ææœˆ
  </label>
  <label style="font-family: å¾®è½¯é›…é»‘,serif;font-size: x-large">
    <input type="checkbox" id="under_river" style="font-family: é»‘ä½“,serif">æ²³åº•æ‘¸é±¼
  </label>
  <label style="font-family: å¾®è½¯é›…é»‘,serif;font-size: x-large">
    <input type="checkbox" id="nagashi_mankan" style="font-family: é»‘ä½“,serif">æµå±€æ»¡è´¯
  </label>
  <label style="font-family: å¾®è½¯é›…é»‘,serif;font-size: x-large">
    <input type="checkbox" id="double_reach" style="font-family: é»‘ä½“,serif">ä¸¤ç«‹ç›´
  </label>
  <label style="font-family: å¾®è½¯é›…é»‘,serif;font-size: x-large">
    <input type="checkbox" id="celestial" style="font-family: é»‘ä½“,serif">å¤©å’Œ
  </label>
  <label style="font-family: å¾®è½¯é›…é»‘,serif;font-size: x-large">
    <input type="checkbox" id="gaia" style="font-family: é»‘ä½“,serif">åœ°å’Œ
  </label>
  <label style="font-family: å¾®è½¯é›…é»‘,serif;font-size: x-large">
    <input type="checkbox" id="ren_hu" style="font-family: é»‘ä½“,serif">äººå’Œ
  </label>
</p>
<br>
<br>
<label style="font-family: é»‘ä½“,serif;font-size: xx-large">äº²å®¶æˆ–è€…å­å®¶*ï¼š</label>
<form id="is_banker_form">
  <label style="font-family: é»‘ä½“,serif;font-size: xx-large">
    <input name="is_banker" type="radio" onchange="isBankerButtonClicked()">
    äº²å®¶
  </label>
  <label style="font-family: é»‘ä½“,serif;font-size: xx-large">
    <input name="is_banker" type="radio" onchange="notBankerButtonClicked()">
    å­å®¶
  </label>
</form>
<p></p>
<label style="font-family: é»‘ä½“,serif;font-size: xx-large">è‡ªæ‘¸æˆ–è£å’Œ*ï¼š</label>
<form id="is_zimo_form">
  <label style="font-family: é»‘ä½“,serif;font-size: xx-large">
    <input name="is_zimo" value="zimo" type="radio" onclick="isZimoButtonClicked()">
    è‡ªæ‘¸
  </label>
  <label style="font-family: é»‘ä½“,serif;font-size: xx-large">
    <input name="is_zimo" value="not_zimo" type="radio" onclick="notZimoButtonClicked()">
    è£å’Œ
  </label>
</form>

<label style="font-family: é»‘ä½“,serif;font-size: xx-large"></label>
<button style="font-family: é»‘ä½“,serif;font-size: xx-large" onclick="countScore()">è®¡ç®—</button>
</body>
<script>

  // æ‰‹ç‰Œçš„æ ¼å¼åŒ–æ–¹æ³•ï¼šé™¤å¼€ä¸€èˆ¬è§„åˆ™ä¹‹å¤–ï¼Œå¦‚æœæ‰‹ç‰Œä¸­æœ‰åƒç¢°æ ï¼Œåˆ™å°†åƒç¢°æ ç‰ŒæŒ‰ç…§'>'çš„æ–¹å¼è¿›è¡Œåˆ†åˆ†éš”
  // '>'è¡¨ç¤ºå°†å…¶å³è¾¹çš„ç‰Œä½œä¸ºåƒç¢°æ ï¼ŒåŒç§èŠ±è‰²ä¸‹çš„ä¸åŒåƒç¢°æ ä¹‹é—´ä½¿ç”¨ç©ºæ ¼è¿›è¡Œåˆ†éš”ï¼Œåˆ†éš”åç§°ä¸ºä¸€ä¸ªç»„ï¼Œå…±æœ‰åƒç‰Œç»„ï¼Œç¢°ç‰Œç»„ï¼Œæ˜æ ç»„å’Œæš—æ ç»„
  // '<'è¡¨ç¤ºæ ¼å¼åŒ–åƒç¢°æ çš„ç»“æŸ
  // ç‰¹åˆ«åœ°ï¼Œä¸ºäº†åŒºåˆ†æ˜æ ä¸æš—æ ï¼Œè§„å®šï¼šå¦‚æœæ¯ä¸€ä¸ªç»„å½“ä¸­æœ‰å››ä¸ªå­—ç¬¦ä¸”å…¶ä¸­åªè¦å­˜åœ¨ä¸€ä¸ªå­—ç¬¦0ï¼Œåˆ™å°†è¯¥ç»„å®šä¹‰ä¸ºæš—æ ç»„
  // ä¾‹ä¸€ï¼š222>345p>222s>4444m77z è¡¨ç¤ºä¸‰ä¸ªä¸€é¥¼çš„æš—åˆ»ï¼Œä¸‰å››äº”é¥¼çš„åƒç‰Œï¼Œä¸‰ä¸ªäºŒæ¡çš„ç¢°ï¼Œå››ä¸ªå››ä¸‡çš„å¤§æ˜æ ä»¥åŠä¸€å¯¹çº¢ä¸­çš„é›€å¤´
  // ä¾‹äºŒï¼š11p>222 333 678p 0444z è¡¨ç¤ºä¸€å¯¹ä¸€é¥¼ï¼ŒäºŒä¸‰é¥¼çš„ç¢°ç‰Œç»„å’Œä¸€ä¸ªåŒ—é£çš„æš—æ ç»„
  // ä¾‹ä¸‰ï¼š22p234s>345s 555p 222m è¡¨ç¤ºä¸€å¯¹äºŒé¥¼ï¼Œ234ï¼Œ345ç´¢çš„åƒç‰Œç»„ï¼Œ555é¥¼å’Œ222ä¸‡çš„ç¢°ç‰Œç»„
  // ä¾‹å››ï¼š>123s 789m 789p 789s<11p
  let cards = document.getElementById("cards").value;
  let calls = document.getElementById("calls").value;
  let dora_count = parseInt(document.getElementById("dora_count").value);

  let regex = /(\d+)([mspz]|$)/g;

  let arr = Array.from(cards.matchAll(regex));
  let cardMaps = [];

  arr.forEach(e => cardMaps.push({number: parseInt(e[1]), suit: e[2]}));
  cardMaps.forEach(e => console.log(e));

  const mahjong = [
    "ğŸ€€", "ğŸ€", "ğŸ€‚", "ğŸ€ƒ","ğŸ€„","ğŸ€…","ğŸ€†",
    "ğŸ€‡", "ğŸ€ˆ", "ğŸ€‰", "ğŸ€Š", "ğŸ€‹", "ğŸ€Œ", "ğŸ€", "ğŸ€", "ğŸ€",
    "ğŸ€", "ğŸ€‘", "ğŸ€’", "ğŸ€“", "ğŸ€”", "ğŸ€•", "ğŸ€–", "ğŸ€—", "ğŸ€˜",
    "ğŸ€™", "ğŸ€š", "ğŸ€›", "ğŸ€œ", "ğŸ€", "ğŸ€", "ğŸ€Ÿ", "ğŸ€ ", "ğŸ€¡",
  ];
  const mahjong_back = "ğŸ€«";

  const lantern = [1, 1, 1, 2, 3, 4, 5, 6, 7, 8, 9, 9, 9];
  const green = ['2','3','4','6','8','6z'];
  const number = [1, 2, 3, 4, 5, 6, 7, 8, 9];
  const character = [1, 2, 3, 4, 5, 6, 7];

  let isBanker;
  let isZimo;
  let player_count;
  let collection_type;
  let card_collections = {
    normal:[],
    flushes: [],
    triplets: [],
    pairs: [],
    gang: []
  };
  let card_groups = {
    normal: [],
    chi: [],
    peng: [],
    an_gang: [],
    ming_gang: []
  };

  function getFourPlayers () {
    player_count = 4;
  }

  function getThreePlayers() {
    player_count = 3;
  }

  function isBankerButtonClicked() {
    isBanker = true;

  }

  function withCollectionType(str) {
    collection_type = str;
  }

  function clearCards(id) {
    let text = document.getElementById(id);
    text.value = "";
  }
  
  function onTileButtonClick(str) {
    switch (collection_type) {
      case "none":
        mahjong.forEach(e => {
          if (e === str) {
            let cardsTab = document.getElementById("cards");
            cardsTab.value = cardsTab.value + str;
          }
        });
        card_groups.normal.push(str);
        break;

      case "chi":
        mahjong.forEach(e => {
          if (e === str) {
            let callsTab = document.getElementById("calls");
            let unicode = str.charCodeAt(0) + str.charCodeAt(1);
            let s1;
            let s2;
            let s3;
            console.log(unicode);

            // ä¸‹é¢å‡ ä¸ªåˆ¤æ–­å½“ç©å®¶ç‚¹å‡»æ‰€æœ‰çš„å­—ç‰Œæˆ–æ•°å­—ç‰Œä¸ƒå…«ä¹æ—¶çš„æ“ä½œ
            // ç‚¹å‡»æ•°å­—ç‰Œä¸ƒå…«ä¹æ—¶ï¼Œå…è®¸å°†åƒç‰Œä¸ƒå…«ä¹åŠ åˆ°æ‰‹ç‰Œï¼Œä¸”ç‚¹å‡»ä¸ƒå…«ä¹çš„ä»»æ„ä¸€å¼ æ—¶éƒ½åªä¼šå°†ä¸ƒå…«ä¹åŠ åˆ°æ‰‹ç‰Œ
            if (unicode === 111689 || unicode === 111690 || unicode === 111691){
              s1 = String.fromCharCode(55356, 56333);
              s2 = String.fromCharCode(55356, 56334);
              s3 = String.fromCharCode(55356, 56335);
              callsTab.value = callsTab.value + " " + s1 + s2 + s3;
              card_groups.chi.push(s1 + s2 + s3);
            }
            else if (unicode === 111698 || unicode === 111699 || unicode === 111700) {
              s1 = String.fromCharCode(55356, 56342);
              s2 = String.fromCharCode(55356, 56343);
              s3 = String.fromCharCode(55356, 56344);
              callsTab.value = callsTab.value + " " + s1 + s2 + s3;
              card_groups.chi.push(s1 + s2 + s3);
            }
            else if (unicode === 111707 || unicode === 111708 || unicode === 111709) {
              s1 = String.fromCharCode(55356, 56351);
              s2 = String.fromCharCode(55356, 56352);
              s3 = String.fromCharCode(55356, 56353);
              callsTab.value = callsTab.value + " " + s1 + s2 + s3;
              card_groups.chi.push(s1 + s2 + s3);
            }
            // å­—ç‰Œä¸èƒ½æ‰§è¡Œåƒç‰Œæ“ä½œ
            else if (unicode > 111676 && unicode <= 111682) {
              console.log("Characters can't Eat!")
            }
            else {
              s1 = String.fromCharCode(str.charCodeAt(0), str.charCodeAt(1) + 1);
              s2 = String.fromCharCode(str.charCodeAt(0), str.charCodeAt(1) + 2);
              callsTab.value = callsTab.value + " " + str + s1 + s2;
              card_groups.chi.push(str + s1 + s2);
            }

          }
        });
        break;

      case "peng":
        mahjong.forEach(e => {
          if (e === str) {
            let callsTab = document.getElementById("calls");
            callsTab.value = callsTab.value + " " + str.repeat(3);
            card_groups.peng.push(str.repeat3);
          }
        });
        break;

      case "ming_gang":
        mahjong.forEach(e => {
          if (e === str) {
            let callsTab = document.getElementById("calls");
            callsTab.value = callsTab.value + " " + str.repeat(4);
            card_groups.ming_gang.push(str.repeat(4));
          }
        });
        break;

      case "an_gang":
        mahjong.forEach(e => {
          if (e === str) {
            let callsTab = document.getElementById("calls");
            callsTab.value = callsTab.value + " " + mahjong_back +  str.repeat(2) + mahjong_back;
            card_groups.an_gang.push(mahjong_back +  str.repeat(2) + mahjong_back);
          }
        });
        break;

      default:
        mahjong.forEach(e => {
          if (e === str) {
            let cardsTab = document.getElementById("cards");
            cardsTab.value = cardsTab.value + str;
          }
        });
        card_groups.normal.push(str);
        break;
    }
  }

  function notBankerButtonClicked() {
    isBanker = false;
  }

  function isZimoButtonClicked() {
    isZimo = true;
  }

  function notZimoButtonClicked() {
    isZimo = false;
  }

  function startsWith(str, format) {
    return str.charAt(1) === format;
  }

  function separate(str, suit) {
    let cardCollections = {
      flushes: [],
      triplets: [],
      pairs: [],
      gang: []
    }

  }

  function separateGroup(str) {
    if (startsWith(str, ">")) {
      if (str.contains(" ")) {

      }
    }
  }

  function separateCollection(str) {

  }

  function countDoubling() {

  }

  function countScore() {

    let doubling = parseInt(document.getElementById("cards").value);
    let talisman = parseInt(document.getElementById("dora_count").value);
    document.body.innerText = "";

    // å½“ç•ªæ•°å°äºå››æ—¶çš„æƒ…å†µ
    if (doubling <= 4) {
      let unitScore = talisman * Math.pow(2, 2 + doubling);
      let score = unitScore;

      // å…ˆåˆ¤æ–­æ˜¯å¦æ˜¯äº²å®¶è‡ªæ‘¸
      if (isBanker) {
        if (isZimo) {

          score *= 2;
          let score1 = score;
          if (score % 100 !== 0) {
            score = score - (score % 100) + 100;
          }
          if (doubling >= 3 && score * 3 >= 12000) {
            document.write("äº²å®¶" + 12000 + "ç‚¹" +
                    "<br>æ¯äººæ”¯ä»˜ï¼š" + 4000);

          } else {
            score1 *= 3;
            if (score1 % 100 !== 0) {
              score1 = score1 - (score1 % 100) + 100;
            }
            document.write("äº²å®¶" + score1 + "ç‚¹" +
                    "<br>æ¯äººæ”¯ä»˜ï¼š" + score + "ç‚¹");
          }
        }
        // è¿™é‡Œåˆ¤æ–­äº²å®¶è£å’Œ
        else {
          score *= 6;
          if (score % 100 !== 0) {
            score = score - (score % 100) + 100;
          }
          if (doubling >= 3 && score >= 12000) {
            document.write("äº²å®¶" + 12000 + "" +
                    "<br>æ”¾é“³è€…æ”¯ä»˜ï¼š" + 12000)

          } else {
            document.write("æ”¾é“³è€…æ”¯ä»˜ï¼š" + score + "ç‚¹");
          }
        }
      }
      // å¼€å§‹åˆ¤æ–­å­å®¶æ˜¯å¦è‡ªæ‘¸
      else {
        if (isZimo) {
          let scoreB = 2 * unitScore;
          let score1 = score;
          let score2 = scoreB;
          let score3 = 0;

          score3 += score1;
          score3 *= 2;
          score3 += score2;

          if (score % 100 !== 0) {
            score = score - (score % 100) + 100;
            scoreB = scoreB - (scoreB % 100) + 100;
          }

          if (doubling >= 3 && score1 + score2 >= 8000) {
            document.write("è‡ªæ‘¸å­å®¶æ»¡è´¯" + 8000 + "ç‚¹" +
                    "<br>äº²å®¶æ”¯ä»˜ï¼š" + 4000 + "ç‚¹" +
                    "<br>å­å®¶æ”¯ä»˜ï¼š" + 2000 + "ç‚¹");
          } else {
            if (score1 % 100 !== 0) {
              score1 = score1 - (score1 % 100) + 100;
              score2 = score2 - (score2 % 100) + 100;
              score3 = score3 - (score3 % 100) + 100;
            }
            document.write("è‡ªæ‘¸å­å®¶" + score3 + "ç‚¹" +
                    "<br>äº²å®¶æ”¯ä»˜ï¼š" + score2 + "ç‚¹" +
                    "<br>å­å®¶æ”¯ä»˜ï¼š" + score1 + "ç‚¹");
          }

        } else {
          score *= 4;
          score = score - (score % 100) + 100;
          if (doubling >= 3 && score >= 8000) {
            document.write("è‡ªæ‘¸å­å®¶æ»¡è´¯" + 8000 + "ç‚¹" +
                    "<br>æ”¾é“³è€…æ”¯ä»˜ï¼š" + 8000 + "ç‚¹");
          } else {
            document.write("æ”¾é“³è€…æ”¯ä»˜ï¼š" + score + "ç‚¹");
          }

        }
      }
    } else if (doubling === 5) {
      var scoreB;
      let unitScore = 2000;
      let scoreBanker = 2 * unitScore;
      let score = unitScore;

      if (isBanker) {
        if (isZimo) {
          score *= 2;
          document.write("äº²å®¶" + score * 3 + "ç‚¹" +
                  "<br>æ¯äººæ”¯ä»˜ï¼š" + score + "ç‚¹");

        } else {
          score *= 6;
          document.write("æ”¾é“³è€…æ”¯ä»˜ï¼š" + score + "ç‚¹");
        }
      } else {
        if (isZimo) {
          scoreBanker = 2 * unitScore;
          scoreB = scoreBanker;

          scoreB = scoreB - (scoreB % 100) + 100;
          document.write("è‡ªæ‘¸å­å®¶" + unitScore * 4 + "ç‚¹" +
                  "<br>äº²å®¶æ”¯ä»˜ï¼š" + scoreB + "ç‚¹" +
                  "ç‚¹<br>å­å®¶æ”¯ä»˜ï¼š" + score + "ç‚¹");

        } else {
          score *= 4;
          document.write("æ”¾é“³è€…æ”¯ä»˜ï¼š" + score + "ç‚¹");
        }
      }
    } else if (doubling === 6 || doubling === 7) {
      let unitScore = 3000;
      let scoreBanker = 2 * unitScore;
      let score = unitScore;

      if (isBanker) {
        if (isZimo) {
          score *= 2;
          document.write("äº²å®¶" + score * 3 + "ç‚¹ï¼Œ" +
                  "<br>æ¯äººæ”¯ä»˜ï¼š" + score + "ç‚¹");

        } else {
          score *= 6;
          document.write("æ”¾é“³è€…æ”¯ä»˜ï¼š" + score + "ç‚¹");
        }
      } else {
        if (isZimo) {
          scoreBanker = 2 * unitScore;
          scoreB = scoreBanker;

          scoreB = scoreB - (scoreB % 100) + 100;
          document.write("è‡ªæ‘¸å­å®¶" + unitScore * 4 + "ç‚¹" +
                  "<br>äº²å®¶æ”¯ä»˜ï¼š" + scoreB + "ç‚¹" +
                  "<br>å­å®¶æ”¯ä»˜ï¼š" + score + "ç‚¹");

        } else {
          score *= 4;
          document.write("æ”¾é“³è€…æ”¯ä»˜ï¼š" + score + "ç‚¹");
        }
      }
    } else if (doubling > 7 && doubling < 11) {
      let unitScore = 4000;
      let scoreBanker = 2 * unitScore;
      let score = unitScore;

      if (isBanker) {
        if (isZimo) {
          score *= 2;
          document.write("äº²å®¶" + score * 3 + "ç‚¹ï¼Œ" +
                  "<br>æ¯äººæ”¯ä»˜ï¼š" + score + "ç‚¹");

        } else {
          score *= 6;
          document.write("æ”¾é“³è€…æ”¯ä»˜ï¼š" + score + "ç‚¹");
        }
      } else {
        if (isZimo) {
          scoreBanker = 2 * unitScore;
          scoreB = scoreBanker;

          scoreB = scoreB - (scoreB % 100) + 100;
          document.write("è‡ªæ‘¸å­å®¶" + unitScore * 4 + "ç‚¹" +
                  "<br>äº²å®¶æ”¯ä»˜ï¼š" + scoreB + "ç‚¹" +
                  "<br>å­å®¶æ”¯ä»˜ï¼š" + score + "ç‚¹");

        } else {
          score *= 4;
          document.write("æ”¾é“³è€…æ”¯ä»˜ï¼š" + score + "ç‚¹");
        }
      }
    } else if (doubling === 11 || doubling === 12) {
      let unitScore = 6000;
      let scoreBanker = 2 * unitScore;
      let score = unitScore;

      if (isBanker) {
        if (isZimo) {
          score *= 2;
          document.write("äº²å®¶" + score * 3 + "ç‚¹" +
                  "<br>æ¯äººæ”¯ä»˜ï¼š" + score + "ç‚¹");

        } else {
          score *= 6;
          document.write("æ”¾é“³è€…æ”¯ä»˜ï¼š" + score + "ç‚¹");
        }
      } else {
        if (isZimo) {
          scoreBanker = 2 * unitScore;
          scoreB = scoreBanker;

          scoreB = scoreB - (scoreB % 100) + 100;
          document.write("è‡ªæ‘¸å­å®¶" + unitScore * 4 + "ç‚¹" +
                  "<br>äº²å®¶æ”¯ä»˜ï¼š" + scoreB + "ç‚¹" +
                  "<br>å­å®¶æ”¯ä»˜ï¼š" + score + "ç‚¹");

        } else {
          score *= 4;
          document.write("æ”¾é“³è€…æ”¯ä»˜ï¼š" + score + "ç‚¹");
        }
      }
    } else if (doubling === 13) {
      let unitScore = 8000;
      let scoreBanker = 2 * unitScore;
      let score = unitScore;

      if (isBanker) {
        if (isZimo) {
          score *= 2;
          document.write("äº²å®¶" + score * 3 + "ç‚¹ï¼Œ" +
                  "<br>æ¯äººæ”¯ä»˜ï¼š" + score + "ç‚¹");

        } else {
          score *= 6;
          document.write("æ”¾é“³è€…æ”¯ä»˜ï¼š" + score + "ç‚¹");
        }
      } else {
        if (isZimo) {
          scoreBanker = 2 * unitScore;
          scoreB = scoreBanker;

          scoreB = scoreB - (scoreB % 100) + 100;
          document.write("è‡ªæ‘¸å­å®¶" + unitScore * 4 + "ç‚¹" +
                  "<br>äº²å®¶æ”¯ä»˜ï¼š" + scoreB + "ç‚¹" +
                  "<br>å­å®¶æ”¯ä»˜ï¼š" + score + "ç‚¹");

        } else {
          score *= 4;
          document.write("æ”¾é“³è€…æ”¯ä»˜ï¼š" + score + "ç‚¹");
        }
      }
    }
  }

</script>
</html>
